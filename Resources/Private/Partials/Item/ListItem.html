<div id="items-list"
	class="row {settings.list.wrapperClass}"
	data-scroll-fix="{settings.scrollFix}"
	data-detail-small-desktop-preview-height-fix="{settings.detail.smallDesktopPreviewHeightFix}"
	data-detail-small-mobile-preview-height-fix="{settings.detail.smallMobilePreviewHeightFix}"
	data-detail-desktop-height="{settings.detail.heightDesktop}"
	data-detail-mobile-height="{settings.detail.heightMobile}">
	<f:for each="{items}" as="item" iteration="i">
		<div class="short-info {settings.list.item.class}" data-categories="{item.categoriesUidList}">
			<div id="item-item-{item.uid}" class="item-item"
				data-count="{i.cycle}" data-uid="{item.uid}"
				data-name="{item.name}"
				data-customer="{item.customer}"
				data-product_choice="{item.productChoice}"
				data-architect="{item.architect}"
				data-consultant="{item.consultant}"
				data-installer="{item.installer}"
				data-categories="{item.categoriesTitleList}"
				data-description="{item.description}"
				data-image="{f:render(partial: 'Item/ListItemLargeImageUrl', arguments: '{item: item}')}">
				<div class="item-short-info text-center">
					<div class="image-mask">
						<f:render section="imagePreview" arguments="{item: item}" />
					</div>
					<div class="text-center">
						<h4>{item.name}</h4>
						<h5>{item.categoriesTitleList}</h5>
					</div>
				</div>
			</div>
		</div>
	</f:for>
</div>
<!--For some reason inline condition doesn't work, need to create section with normal IF-->
<f:comment>
	This is never used ?
<f:section name="imageDetail">
	<f:if condition="{item.images}">
		<f:then>
			<f:comment>With bad formatting we avoid lne breaks</f:comment>
			<f:for each="{item.images}" as="image" iteration="i">
				<f:if condition="{i.isFirst}">
					<f:then>
						<f:uri.image image="{image}" width="{width}" height="{height}" /></f:then>
					<f:else>,|,
						<f:uri.image image="{image}" width="{width}" height="{height}" /></f:else>
				</f:if>
			</f:for>
		</f:then>
		<f:else>
			<f:uri.image src="{settings.defaultImageBig}" width="{width}" height="{height}" />
		</f:else>
	</f:if>
</f:section>
</f:comment>

<f:section name="imagePreview">
	<f:alias map="{image: item.image.0}">
		<f:if condition="{image}">
			<f:then>
				<f:image image="{image}" alt="{image.originalResource.title}" class="item-item__img img-responsive"
						 width="{settings.list.item.image.width}" height="{settings.list.item.image.height}" />
			</f:then>
			<f:else>
				<f:image src="{settings.list.item.image.no-image}" alt="{item.image.originalResource.title}" class="item-item__img img-responsive" width="{settings.list.item.image.width}" height="{settings.list.item.image.height}" />
			</f:else>
		</f:if>
	</f:alias>
</f:section>